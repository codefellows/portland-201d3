function F(){this.nDisp=0,this.nSel=0}function makeFs(){for(var e=0;e<names.length;e++)Fs.push(new F),nameMap.push([e,names[e]])}function setBlockVote(e){blockVote=e,localStorage.blockVote=blockVote}function setRoundClicks(e){roundClicks=e,localStorage.roundClicks=roundClicks}function gebi(e){return document.getElementById(e)}function setBtnViz(e,t,o){btnShow.style.visibility=viz[e],btnMore.style.visibility=viz[t],btnNew.style.visibility=viz[o],localStorage.btnShow=e,localStorage.btnMore=t,localStorage.btnNew=o}function loadImg(e,t,o){var a=Math.floor(Math.random()*e.length);var i=e[a][0];initIde(t,i,o),Fs[i].nDisp++,localStorage.stats=JSON.stringify(Fs),e.splice(a,1)}function loadImages(){nmTmp=nameMap.slice();for(var e=0;e<domIm.length;e++)loadImg(nmTmp,domIm[e],caps[e]);localStorage.idx1=im1.idx,localStorage.idx2=im2.idx,localStorage.idx3=im3.idx}function show(){dump(),setBtnViz(0,0,1),setRoundClicks(0)}function vote(e){blockVote||(setRoundClicks(roundClicks+1),Fs[e.target.idx].nSel++,localStorage.stats=JSON.stringify(Fs),roundClicks==voteThresh1?(setBlockVote(!0),setBtnViz(1,1,0)):roundClicks==voteThresh2?(setBlockVote(!0),show()):loadImages())}function dump(){chart.innerHTML="";for(var e=0;e<Fs.length;e++){var t=Fs[e].nSel;var o=Fs[e].nDisp;var a=0;t&&(a=Math.round(100*t/o,1)),chart.innerHTML+=names[e]+": "+t+" votes, "+o+" shows ("+a+"%)<br>"}localStorage.chart=!0}function initIde(e,t,o){e.idx=t,e.setAttribute("src","img/"+nameMap[e.idx][1]+".jpg"),o.textContent=names[t]}var voteThresh1=16;var voteThresh2=8+voteThresh1;var names=["Holm","Tate","Rousey","Jones","McGregor","Rockhold","Winslow","McCarthy"];var nameMap=[],Fs=[];var roundClicks,blockVote;var viz=["hidden","visible"];var domIm=[gebi("im1"),gebi("im2"),gebi("im3")];var btnShow=gebi("show");var btnMore=gebi("more");var btnNew=gebi("new");var chart=gebi("chart");var caps=[gebi("cap1"),gebi("cap2"),gebi("cap3")];im1.addEventListener("click",vote),im2.addEventListener("click",vote),im3.addEventListener("click",vote),btnShow.addEventListener("click",show),btnMore.addEventListener("click",function(){setBtnViz(0,0,0),setBlockVote(!1),loadImages()}),btnNew.addEventListener("click",function(){setBtnViz(0,0,0),chart.innerHTML="",localStorage.chart=!1,loadImages(),setBlockVote(!1)}),function(){makeFs(),"undefined"!=typeof localStorage.btnShow?(setBtnViz(localStorage.btnShow,localStorage.btnMore,localStorage.btnNew),blockVote=JSON.parse(localStorage.blockVote),roundClicks=JSON.parse(localStorage.roundClicks),initIde(im1,localStorage.idx1,cap1),initIde(im2,localStorage.idx2,cap2),initIde(im3,localStorage.idx3,cap3),"undefined"!=typeof localStorage.stats&&(Fs=JSON.parse(localStorage.stats)),"false"!=localStorage.chart&&show()):(setBtnViz(0,0,0),setBlockVote(!1),localStorage.chart=!1,setRoundClicks(0),loadImages())}();
